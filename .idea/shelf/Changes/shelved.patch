Index: src/main/java/org/alchemy/potion/PotionServiceImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/alchemy/potion/PotionServiceImpl.java b/src/main/java/org/alchemy/potion/PotionServiceImpl.java
new file mode 100644
--- /dev/null	(date 1771263437000)
+++ b/src/main/java/org/alchemy/potion/PotionServiceImpl.java	(date 1771263437000)
@@ -0,0 +1,38 @@
+package org.alchemy.potion;
+
+import org.alchemy.potion.model.CreatePotionRequest;
+import org.alchemy.potion.model.Potion;
+import org.springframework.stereotype.Service;
+
+import java.util.List;
+import java.util.Optional;
+
+@Service
+public class PotionServiceImpl implements PotionService {
+
+    private final PotionRepository potionRepository;
+
+    public PotionServiceImpl(PotionRepository potionRepository) {
+        this.potionRepository = potionRepository;
+    }
+
+    @Override
+    public List<Potion> getAll() {
+        return potionRepository.findAll()
+                .stream()
+                .map(Potion::from)
+                .toList();
+    }
+
+    @Override
+    public Optional<Potion> get(int potionNumber) {
+        return potionRepository.findByPotionNo(potionNumber)
+                .map(Potion::from);
+    }
+
+    @Override
+    public Potion create(CreatePotionRequest request) {
+        var createdPotion = potionRepository.create(request.potionNo(), request.name());
+        return Potion.from(createdPotion);
+    }
+}
Index: src/main/java/org/alchemy/potion/PotionService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/alchemy/potion/PotionService.java b/src/main/java/org/alchemy/potion/PotionService.java
new file mode 100644
--- /dev/null	(date 1771263437000)
+++ b/src/main/java/org/alchemy/potion/PotionService.java	(date 1771263437000)
@@ -0,0 +1,15 @@
+package org.alchemy.potion;
+
+import org.alchemy.potion.model.CreatePotionRequest;
+import org.alchemy.potion.model.Potion;
+
+import java.util.List;
+import java.util.Optional;
+
+public interface PotionService {
+    List<Potion> getAll();
+
+    Optional<Potion> get(int potionNumber);
+
+    Potion create(CreatePotionRequest request);
+}
Index: src/main/java/org/alchemy/potion/PotionsController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/alchemy/potion/PotionsController.java b/src/main/java/org/alchemy/potion/PotionsController.java
new file mode 100644
--- /dev/null	(date 1771263437000)
+++ b/src/main/java/org/alchemy/potion/PotionsController.java	(date 1771263437000)
@@ -0,0 +1,51 @@
+package org.alchemy.potion;
+
+import org.alchemy.potion.model.CreatePotionRequest;
+import org.alchemy.potion.model.Potion;
+import org.springframework.dao.DataIntegrityViolationException;
+import org.springframework.http.HttpStatus;
+import org.springframework.web.bind.annotation.ExceptionHandler;
+import org.springframework.web.bind.annotation.GetMapping;
+import org.springframework.web.bind.annotation.PathVariable;
+import org.springframework.web.bind.annotation.PostMapping;
+import org.springframework.web.bind.annotation.RequestBody;
+import org.springframework.web.bind.annotation.RequestMapping;
+import org.springframework.web.bind.annotation.ResponseStatus;
+import org.springframework.web.bind.annotation.RestController;
+import org.springframework.web.server.ResponseStatusException;
+
+import java.util.List;
+
+@RestController
+@RequestMapping("/potions")
+public class PotionsController {
+
+    private final PotionService potionService;
+
+    public PotionsController(final PotionService potionService) {
+        this.potionService = potionService;
+    }
+
+    @GetMapping
+    public List<Potion> list() {
+        return potionService.getAll();
+    }
+
+    @GetMapping("/{potionNumber}")
+    public Potion getByPotionNo(@PathVariable int potionNumber) {
+        return potionService.get(potionNumber)
+                .orElseThrow(() -> new ResponseStatusException(HttpStatus.NOT_FOUND, "Potion not found"));
+    }
+
+    @PostMapping
+    @ResponseStatus(HttpStatus.CREATED)
+    public Potion create(@RequestBody CreatePotionRequest req) {
+        return potionService.create(req);
+    }
+
+    @ExceptionHandler(DataIntegrityViolationException.class)
+    @ResponseStatus(HttpStatus.CONFLICT)
+    public String handleConflict(DataIntegrityViolationException ex) {
+        return "Conflict: %s".formatted(ex.getMostSpecificCause().getMessage());
+    }
+}
Index: src/main/java/org/alchemy/potion/PotionRepositoryImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/alchemy/potion/PotionRepositoryImpl.java b/src/main/java/org/alchemy/potion/PotionRepositoryImpl.java
new file mode 100644
--- /dev/null	(date 1771263437000)
+++ b/src/main/java/org/alchemy/potion/PotionRepositoryImpl.java	(date 1771263437000)
@@ -0,0 +1,68 @@
+package org.alchemy.potion;
+
+import org.alchemy.potion.model.PotionEntity;
+import org.springframework.jdbc.core.JdbcTemplate;
+import org.springframework.jdbc.core.RowMapper;
+import org.springframework.jdbc.support.GeneratedKeyHolder;
+import org.springframework.jdbc.support.KeyHolder;
+import org.springframework.stereotype.Repository;
+
+import java.sql.PreparedStatement;
+import java.sql.Statement;
+import java.util.List;
+import java.util.Optional;
+
+@Repository
+public class PotionRepositoryImpl implements PotionRepository {
+
+    private static final RowMapper<PotionEntity> POTION_ROW_MAPPER = (rs, rowNum) ->
+            new PotionEntity(
+                    rs.getLong("potion_id"),
+                    rs.getInt("potion_no"),
+                    rs.getString("name")
+            );
+
+    private final JdbcTemplate jdbc;
+
+    public PotionRepositoryImpl(JdbcTemplate jdbc) {
+        this.jdbc = jdbc;
+    }
+
+    @Override
+    public List<PotionEntity> findAll() {
+        return jdbc.query(
+                "select potion_id, potion_no, name from potions order by potion_no",
+                POTION_ROW_MAPPER
+                         );
+    }
+
+    @Override
+    public Optional<PotionEntity> findByPotionNo(int potionNo) {
+        var list = jdbc.query(
+                "select potion_id, potion_no, name from potions where potion_no = ?",
+                POTION_ROW_MAPPER,
+                potionNo
+                             );
+        return list.stream().findFirst();
+    }
+
+    @Override
+    public PotionEntity create(int potionNo, String name) {
+        KeyHolder kh = new GeneratedKeyHolder();
+
+        jdbc.update(connection -> {
+            PreparedStatement ps = connection.prepareStatement(
+                    "insert into potions(potion_no, name) values (?, ?)",
+                    Statement.RETURN_GENERATED_KEYS
+                                                              );
+            ps.setInt(1, potionNo);
+            ps.setString(2, name);
+            return ps;
+        }, kh);
+
+        Number key = kh.getKey();
+        long id = (key != null) ? key.longValue() : -1L;
+
+        return new PotionEntity(id, potionNo, name);
+    }
+}
Index: src/main/java/org/alchemy/potion/PotionRepository.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/alchemy/potion/PotionRepository.java b/src/main/java/org/alchemy/potion/PotionRepository.java
new file mode 100644
--- /dev/null	(date 1771361596909)
+++ b/src/main/java/org/alchemy/potion/PotionRepository.java	(date 1771361596909)
@@ -0,0 +1,14 @@
+package org.alchemy.potion;
+
+import org.alchemy.potion.model.PotionEntity;
+
+import java.util.List;
+import java.util.Optional;
+
+public interface PotionRepository {
+    List<PotionEntity> findAll();
+
+    Optional<PotionEntity> findByPotionNo(int potionNo);
+
+    PotionEntity create(int potionNo, String name);
+}
Index: pom.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/pom.xml b/pom.xml
new file mode 100644
--- /dev/null	(date 1771261015000)
+++ b/pom.xml	(date 1771261015000)
@@ -0,0 +1,57 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<project xmlns="http://maven.apache.org/POM/4.0.0"
+         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
+         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
+    <modelVersion>4.0.0</modelVersion>
+
+    <parent>
+        <groupId>org.springframework.boot</groupId>
+        <artifactId>spring-boot-starter-parent</artifactId>
+        <version>3.3.8</version>
+        <relativePath/>
+    </parent>
+
+    <groupId>org.example</groupId>
+    <artifactId>alchemy</artifactId>
+    <version>1.0-SNAPSHOT</version>
+
+    <properties>
+        <java.version>21</java.version>
+    </properties>
+
+    <dependencies>
+        <dependency>
+            <groupId>org.springframework.boot</groupId>
+            <artifactId>spring-boot-starter</artifactId>
+        </dependency>
+
+        <dependency>
+            <groupId>org.springframework.boot</groupId>
+            <artifactId>spring-boot-starter-jdbc</artifactId>
+        </dependency>
+
+        <dependency>
+            <groupId>org.flywaydb</groupId>
+            <artifactId>flyway-core</artifactId>
+        </dependency>
+
+        <dependency>
+            <groupId>com.h2database</groupId>
+            <artifactId>h2</artifactId>
+            <scope>runtime</scope>
+        </dependency>
+        <dependency>
+            <groupId>org.springframework.boot</groupId>
+            <artifactId>spring-boot-starter-web</artifactId>
+        </dependency>
+    </dependencies>
+
+    <build>
+        <plugins>
+            <plugin>
+                <groupId>org.springframework.boot</groupId>
+                <artifactId>spring-boot-maven-plugin</artifactId>
+            </plugin>
+        </plugins>
+    </build>
+</project>
Index: src/main/java/org/alchemy/potion/model/package-info.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/alchemy/potion/model/package-info.java b/src/main/java/org/alchemy/potion/model/package-info.java
new file mode 100644
--- /dev/null	(date 1771263437000)
+++ b/src/main/java/org/alchemy/potion/model/package-info.java	(date 1771263437000)
@@ -0,0 +1,4 @@
+@NonNullApi
+package org.alchemy.potion.model;
+
+import org.springframework.lang.NonNullApi;
Index: src/main/java/org/alchemy/potion/model/CreatePotionRequest.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/alchemy/potion/model/CreatePotionRequest.java b/src/main/java/org/alchemy/potion/model/CreatePotionRequest.java
new file mode 100644
--- /dev/null	(date 1771263437000)
+++ b/src/main/java/org/alchemy/potion/model/CreatePotionRequest.java	(date 1771263437000)
@@ -0,0 +1,4 @@
+package org.alchemy.potion.model;
+
+public record CreatePotionRequest(int potionNo, String name) {
+}
\ No newline at end of file
Index: .gitignore
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.gitignore b/.gitignore
new file mode 100644
--- /dev/null	(date 1771180190000)
+++ b/.gitignore	(date 1771180190000)
@@ -0,0 +1,39 @@
+target/
+!.mvn/wrapper/maven-wrapper.jar
+!**/src/main/**/target/
+!**/src/test/**/target/
+.kotlin
+
+### IntelliJ IDEA ###
+.idea/modules.xml
+.idea/jarRepositories.xml
+.idea/compiler.xml
+.idea/libraries/
+*.iws
+*.iml
+*.ipr
+
+### Eclipse ###
+.apt_generated
+.classpath
+.factorypath
+.project
+.settings
+.springBeans
+.sts4-cache
+
+### NetBeans ###
+/nbproject/private/
+/nbbuild/
+/dist/
+/nbdist/
+/.nb-gradle/
+build/
+!**/src/main/**/build/
+!**/src/test/**/build/
+
+### VS Code ###
+.vscode/
+
+### Mac OS ###
+.DS_Store
\ No newline at end of file
Index: src/main/java/org/alchemy/potion/model/PotionEntity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/alchemy/potion/model/PotionEntity.java b/src/main/java/org/alchemy/potion/model/PotionEntity.java
new file mode 100644
--- /dev/null	(date 1771263437000)
+++ b/src/main/java/org/alchemy/potion/model/PotionEntity.java	(date 1771263437000)
@@ -0,0 +1,6 @@
+package org.alchemy.potion.model;
+
+public record PotionEntity(long potionId,
+                           int potionNumber,
+                           String name) {
+}
Index: src/main/java/org/alchemy/ingredients/model/package-info.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/alchemy/ingredients/model/package-info.java b/src/main/java/org/alchemy/ingredients/model/package-info.java
new file mode 100644
--- /dev/null	(date 1771328337213)
+++ b/src/main/java/org/alchemy/ingredients/model/package-info.java	(date 1771328337213)
@@ -0,0 +1,4 @@
+@NonNullApi
+package org.alchemy.ingredients.model;
+
+import org.springframework.lang.NonNullApi;
\ No newline at end of file
Index: src/main/java/org/alchemy/ingredients/IngredientsRepository.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/alchemy/ingredients/IngredientsRepository.java b/src/main/java/org/alchemy/ingredients/IngredientsRepository.java
new file mode 100644
--- /dev/null	(date 1771335910776)
+++ b/src/main/java/org/alchemy/ingredients/IngredientsRepository.java	(date 1771335910776)
@@ -0,0 +1,14 @@
+package org.alchemy.ingredients;
+
+import org.alchemy.ingredients.model.IngredientsEntity;
+
+import java.util.List;
+import java.util.Optional;
+
+public interface IngredientsRepository {
+    List<IngredientsEntity> findAll();
+
+    Optional<IngredientsEntity> findById(long id);
+
+    IngredientsEntity create(String name);
+}
Index: src/main/java/org/alchemy/potion/model/Potion.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/alchemy/potion/model/Potion.java b/src/main/java/org/alchemy/potion/model/Potion.java
new file mode 100644
--- /dev/null	(date 1771263437000)
+++ b/src/main/java/org/alchemy/potion/model/Potion.java	(date 1771263437000)
@@ -0,0 +1,12 @@
+package org.alchemy.potion.model;
+
+public record Potion(long potionId,
+                     int potionNumber,
+                     String name) {
+
+    public static Potion from(PotionEntity entity) {
+        return new Potion(entity.potionId(),
+                entity.potionNumber(),
+                entity.name());
+    }
+}
Index: src/main/java/org/alchemy/ingredients/model/IngredientsEntity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/alchemy/ingredients/model/IngredientsEntity.java b/src/main/java/org/alchemy/ingredients/model/IngredientsEntity.java
new file mode 100644
--- /dev/null	(date 1771335521402)
+++ b/src/main/java/org/alchemy/ingredients/model/IngredientsEntity.java	(date 1771335521402)
@@ -0,0 +1,5 @@
+package org.alchemy.ingredients.model;
+
+public record IngredientsEntity(long ingredientsId,
+                                 String name) {
+}
Index: .idea/inspectionProfiles/Project_Default.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/inspectionProfiles/Project_Default.xml b/.idea/inspectionProfiles/Project_Default.xml
new file mode 100644
--- /dev/null	(date 1771260120000)
+++ b/.idea/inspectionProfiles/Project_Default.xml	(date 1771260120000)
@@ -0,0 +1,6 @@
+<component name="InspectionProjectProfileManager">
+  <profile version="1.0">
+    <option name="myName" value="Project Default" />
+    <inspection_tool class="SqlNoDataSourceInspection" enabled="false" level="WARNING" enabled_by_default="false" />
+  </profile>
+</component>
\ No newline at end of file
Index: src/main/java/org/alchemy/ingredients/model/Ingredients.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/alchemy/ingredients/model/Ingredients.java b/src/main/java/org/alchemy/ingredients/model/Ingredients.java
new file mode 100644
--- /dev/null	(date 1771335750443)
+++ b/src/main/java/org/alchemy/ingredients/model/Ingredients.java	(date 1771335750443)
@@ -0,0 +1,10 @@
+package org.alchemy.ingredients.model;
+
+public record Ingredients(long ingredientsId,
+                          String name) {
+
+    public static Ingredients from(IngredientsEntity entity) {
+        return new Ingredients(entity.ingredientsId(),
+                entity.name());
+    }
+}
Index: src/main/java/org/alchemy/Main.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/alchemy/Main.java b/src/main/java/org/alchemy/Main.java
new file mode 100644
--- /dev/null	(date 1771263437000)
+++ b/src/main/java/org/alchemy/Main.java	(date 1771263437000)
@@ -0,0 +1,13 @@
+package org.alchemy;
+
+
+import org.springframework.boot.SpringApplication;
+import org.springframework.boot.autoconfigure.SpringBootApplication;
+
+@SpringBootApplication
+public class Main {
+
+    public static void main(String[] args) {
+        SpringApplication.run(Main.class, args);
+    }
+}
Index: src/main/java/org/alchemy/craft/model/CraftingRequest.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/alchemy/craft/model/CraftingRequest.java b/src/main/java/org/alchemy/craft/model/CraftingRequest.java
new file mode 100644
--- /dev/null	(date 1771362779519)
+++ b/src/main/java/org/alchemy/craft/model/CraftingRequest.java	(date 1771362779519)
@@ -0,0 +1,7 @@
+package org.alchemy.craft.model;
+
+import java.util.Map;
+
+//передача списка ингридиентов LONG - ID, Integer - количество
+public record CraftingRequest(Map<Long, Integer> inventory) {
+}
Index: src/main/java/org/alchemy/craft/CraftingRepository.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/alchemy/craft/CraftingRepository.java b/src/main/java/org/alchemy/craft/CraftingRepository.java
new file mode 100644
--- /dev/null	(date 1771368737768)
+++ b/src/main/java/org/alchemy/craft/CraftingRepository.java	(date 1771368737768)
@@ -0,0 +1,9 @@
+package org.alchemy.craft;
+
+import java.util.List;
+
+public interface CraftingRepository {
+    record RecipeRow(String potionName,long ingredientId, int requiredQty){}
+
+    List<RecipeRow> findAllRecipes();
+}
Index: src/main/resources/application.properties
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>ISO-8859-1
===================================================================
diff --git a/src/main/resources/application.properties b/src/main/resources/application.properties
new file mode 100644
--- /dev/null	(date 1771260127000)
+++ b/src/main/resources/application.properties	(date 1771260127000)
@@ -0,0 +1,11 @@
+spring.datasource.url=jdbc:h2:mem:potiondb;DB_CLOSE_DELAY=-1
+spring.datasource.username=sa
+spring.datasource.password=
+spring.datasource.driver-class-name=org.h2.Driver
+
+spring.flyway.enabled=true
+spring.flyway.locations=classpath:db/migration
+
+# Optional: H2 console
+spring.h2.console.enabled=true
+spring.h2.console.path=/h2-console
Index: src/main/java/org/alchemy/package-info.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/alchemy/package-info.java b/src/main/java/org/alchemy/package-info.java
new file mode 100644
--- /dev/null	(date 1771263437000)
+++ b/src/main/java/org/alchemy/package-info.java	(date 1771263437000)
@@ -0,0 +1,4 @@
+@NonNullApi
+package org.alchemy;
+
+import org.springframework.lang.NonNullApi;
Index: src/main/resources/db/migration/V1__create_schema.sql
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/resources/db/migration/V1__create_schema.sql b/src/main/resources/db/migration/V1__create_schema.sql
new file mode 100644
--- /dev/null	(date 1771260119000)
+++ b/src/main/resources/db/migration/V1__create_schema.sql	(date 1771260119000)
@@ -0,0 +1,63 @@
+create table potions
+(
+    potion_id bigint generated by default as identity primary key,
+    potion_no int          not null,
+    name      varchar(200) not null,
+    constraint uq_potions_potion_no unique (potion_no)
+);
+
+create table ingredients
+(
+    ingredient_id bigint generated by default as identity primary key,
+    name          varchar(200) not null,
+    constraint uq_ingredients_name unique (name)
+);
+
+create table potion_ingredients
+(
+    potion_id     bigint not null,
+    ingredient_id bigint not null,
+    qty           int    not null,
+    constraint pk_potion_ingredients primary key (potion_id, ingredient_id),
+    constraint fk_pi_potion foreign key (potion_id) references potions (potion_id) on delete cascade,
+    constraint fk_pi_ingredient foreign key (ingredient_id) references ingredients (ingredient_id),
+    constraint ck_pi_qty_positive check (qty > 0)
+);
+
+create table instruction_variants
+(
+    variant_id bigint generated by default as identity primary key,
+    potion_id  bigint       not null,
+    label      varchar(100) not null,
+    constraint fk_iv_potion foreign key (potion_id) references potions (potion_id) on delete cascade,
+    constraint uq_iv_potion_label unique (potion_id, label)
+);
+
+create table instruction_steps
+(
+    variant_id bigint not null,
+    step_no    int    not null,
+    step_text  clob   not null,
+    constraint pk_instruction_steps primary key (variant_id, step_no),
+    constraint fk_is_variant foreign key (variant_id) references instruction_variants (variant_id) on delete cascade,
+    constraint ck_is_step_no_positive check (step_no > 0)
+);
+
+create table potion_effects
+(
+    potion_id   bigint      not null,
+    quality     varchar(50) not null,
+    effect_text clob        not null,
+    constraint pk_potion_effects primary key (potion_id, quality),
+    constraint fk_pe_potion foreign key (potion_id) references potions (potion_id) on delete cascade
+);
+
+create table potion_quantity_requirements
+(
+    potion_id      bigint       not null,
+    perk_tier      varchar(120) not null,
+    required_count int          not null,
+    constraint pk_potion_quantity primary key (potion_id, perk_tier),
+    constraint fk_pqr_potion foreign key (potion_id) references potions (potion_id) on delete cascade,
+    constraint ck_pqr_required_count_nonneg check (required_count >= 0)
+);
\ No newline at end of file
Index: src/main/java/org/alchemy/craft/CraftingService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/alchemy/craft/CraftingService.java b/src/main/java/org/alchemy/craft/CraftingService.java
new file mode 100644
--- /dev/null	(date 1771408553491)
+++ b/src/main/java/org/alchemy/craft/CraftingService.java	(date 1771408553491)
@@ -0,0 +1,11 @@
+package org.alchemy.craft;
+
+import org.alchemy.craft.dto.PotionCraftResult;
+import org.alchemy.craft.model.CraftingRequest;
+import org.alchemy.craft.model.CraftingResponse;
+
+import java.util.List;
+
+public interface CraftingService {
+    List<PotionCraftResult> calculatePotions(CraftingRequest request);
+}
Index: src/main/resources/db/migration/V2__seed_data.sql
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/resources/db/migration/V2__seed_data.sql b/src/main/resources/db/migration/V2__seed_data.sql
new file mode 100644
--- /dev/null	(date 1771324318211)
+++ b/src/main/resources/db/migration/V2__seed_data.sql	(date 1771324318211)
@@ -0,0 +1,4284 @@
+ -- Potions
+insert into potions (potion_no, name) values (1, 'Aesop');
+insert into potions (potion_no, name) values (2, 'Aqua Vitalis');
+insert into potions (potion_no, name) values (3, 'Artemisia');
+insert into potions (potion_no, name) values (4, 'Bane Poison');
+insert into potions (potion_no, name) values (5, 'Bowman’s Brew');
+insert into potions (potion_no, name) values (6, 'Buck’s Blood Potion');
+insert into potions (potion_no, name) values (7, 'Chamomile Decoction');
+insert into potions (potion_no, name) values (8, 'Cockerel');
+insert into potions (potion_no, name) values (9, 'Digestive Potion');
+insert into potions (potion_no, name) values (10, 'Dollmaker Potion');
+insert into potions (potion_no, name) values (11, 'Embrocation');
+insert into potions (potion_no, name) values (12, 'Fever Tonic');
+insert into potions (potion_no, name) values (13, 'Fox');
+insert into potions (potion_no, name) values (14, 'Hair o’ the Dog');
+insert into potions (potion_no, name) values (15, 'Lead Shot Gunpowder');
+insert into potions (potion_no, name) values (16, 'Lethean Water');
+insert into potions (potion_no, name) values (17, 'Lion Perfume');
+insert into potions (potion_no, name) values (18, 'Lullaby');
+insert into potions (potion_no, name) values (19, 'Marigold Decoction');
+insert into potions (potion_no, name) values (20, 'Mintha Perfume');
+insert into potions (potion_no, name) values (21, 'Moonshine');
+insert into potions (potion_no, name) values (22, 'Nighthawk');
+insert into potions (potion_no, name) values (23, 'Painkiller Brew');
+insert into potions (potion_no, name) values (24, 'Quickfinger');
+insert into potions (potion_no, name) values (25, 'Saviour Schnapps');
+insert into potions (potion_no, name) values (26, 'Scattershot Powder');
+insert into potions (potion_no, name) values (27, 'Soap');
+
+-- Ingredients (distinct)
+insert into ingredients (name) values ('Amanita Muscaria');
+insert into ingredients (name) values ('Belladonna');
+insert into ingredients (name) values ('Boar’s Tusk');
+insert into ingredients (name) values ('Chamomile');
+insert into ingredients (name) values ('Charcoal');
+insert into ingredients (name) values ('Cobweb');
+insert into ingredients (name) values ('Comfrey');
+insert into ingredients (name) values ('Dandelion');
+insert into ingredients (name) values ('Elderberry Leaves');
+insert into ingredients (name) values ('Eyebright');
+insert into ingredients (name) values ('Feverfew');
+insert into ingredients (name) values ('Ginger');
+insert into ingredients (name) values ('Henbane');
+insert into ingredients (name) values ('Herb Paris');
+insert into ingredients (name) values ('Leached Coal');
+insert into ingredients (name) values ('Marigold');
+insert into ingredients (name) values ('Mint');
+insert into ingredients (name) values ('Nettle');
+insert into ingredients (name) values ('Poppy');
+insert into ingredients (name) values ('Sage');
+insert into ingredients (name) values ('Saltpetre');
+insert into ingredients (name) values ('St. John’s Wort');
+insert into ingredients (name) values ('Sulphur');
+insert into ingredients (name) values ('Thistle');
+insert into ingredients (name) values ('Valerian');
+insert into ingredients (name) values ('Wormwood');
+
+-- Potion ingredients
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Belladonna'
+where p.potion_no = 1;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Boar’s Tusk'
+where p.potion_no = 1;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 2
+from potions p
+join ingredients i on i.name = 'Comfrey'
+where p.potion_no = 1;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 2
+from potions p
+join ingredients i on i.name = 'Dandelion'
+where p.potion_no = 2;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Marigold'
+where p.potion_no = 2;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Sage'
+where p.potion_no = 3;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 2
+from potions p
+join ingredients i on i.name = 'Wormwood'
+where p.potion_no = 3;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Amanita Muscaria'
+where p.potion_no = 4;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 2
+from potions p
+join ingredients i on i.name = 'Belladonna'
+where p.potion_no = 4;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Wormwood'
+where p.potion_no = 4;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 2
+from potions p
+join ingredients i on i.name = 'Eyebright'
+where p.potion_no = 5;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'St. John’s Wort'
+where p.potion_no = 5;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Comfrey'
+where p.potion_no = 6;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Dandelion'
+where p.potion_no = 6;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'St. John’s Wort'
+where p.potion_no = 6;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 2
+from potions p
+join ingredients i on i.name = 'Chamomile'
+where p.potion_no = 7;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Sage'
+where p.potion_no = 7;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 2
+from potions p
+join ingredients i on i.name = 'Mint'
+where p.potion_no = 8;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Valerian'
+where p.potion_no = 8;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Charcoal'
+where p.potion_no = 9;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Nettle'
+where p.potion_no = 9;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 2
+from potions p
+join ingredients i on i.name = 'Thistle'
+where p.potion_no = 9;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 2
+from potions p
+join ingredients i on i.name = 'Herb Paris'
+where p.potion_no = 10;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Valerian'
+where p.potion_no = 10;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Boar’s Tusk'
+where p.potion_no = 11;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Eyebright'
+where p.potion_no = 11;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Poppy'
+where p.potion_no = 11;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Valerian'
+where p.potion_no = 11;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Elderberry Leaves'
+where p.potion_no = 12;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 3
+from potions p
+join ingredients i on i.name = 'Feverfew'
+where p.potion_no = 12;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 2
+from potions p
+join ingredients i on i.name = 'Ginger'
+where p.potion_no = 12;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Belladonna'
+where p.potion_no = 13;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Charcoal'
+where p.potion_no = 13;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Nettle'
+where p.potion_no = 13;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'St. John’s Wort'
+where p.potion_no = 13;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Mint'
+where p.potion_no = 14;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Sage'
+where p.potion_no = 14;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'St. John’s Wort'
+where p.potion_no = 14;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Charcoal'
+where p.potion_no = 15;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Saltpetre'
+where p.potion_no = 15;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Sulphur'
+where p.potion_no = 15;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Belladonna'
+where p.potion_no = 16;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Henbane'
+where p.potion_no = 16;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 2
+from potions p
+join ingredients i on i.name = 'Wormwood'
+where p.potion_no = 16;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 2
+from potions p
+join ingredients i on i.name = 'Mint'
+where p.potion_no = 17;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 2
+from potions p
+join ingredients i on i.name = 'Sage'
+where p.potion_no = 17;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Herb Paris'
+where p.potion_no = 18;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Poppy'
+where p.potion_no = 18;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Thistle'
+where p.potion_no = 18;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 2
+from potions p
+join ingredients i on i.name = 'Marigold'
+where p.potion_no = 19;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Nettle'
+where p.potion_no = 19;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 3
+from potions p
+join ingredients i on i.name = 'Dandelion'
+where p.potion_no = 20;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Marigold'
+where p.potion_no = 20;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Mint'
+where p.potion_no = 20;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 2
+from potions p
+join ingredients i on i.name = 'Mint'
+where p.potion_no = 21;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 2
+from potions p
+join ingredients i on i.name = 'Wormwood'
+where p.potion_no = 21;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Belladonna'
+where p.potion_no = 22;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Chamomile'
+where p.potion_no = 22;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 2
+from potions p
+join ingredients i on i.name = 'Eyebright'
+where p.potion_no = 22;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Comfrey'
+where p.potion_no = 23;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Marigold'
+where p.potion_no = 23;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 3
+from potions p
+join ingredients i on i.name = 'Poppy'
+where p.potion_no = 23;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Cobweb'
+where p.potion_no = 24;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 2
+from potions p
+join ingredients i on i.name = 'Eyebright'
+where p.potion_no = 24;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 2
+from potions p
+join ingredients i on i.name = 'Valerian'
+where p.potion_no = 24;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 2
+from potions p
+join ingredients i on i.name = 'Belladonna'
+where p.potion_no = 25;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Nettle'
+where p.potion_no = 25;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Leached Coal'
+where p.potion_no = 26;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Saltpetre'
+where p.potion_no = 26;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Sulphur'
+where p.potion_no = 26;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Charcoal'
+where p.potion_no = 27;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 1
+from potions p
+join ingredients i on i.name = 'Dandelion'
+where p.potion_no = 27;
+insert into potion_ingredients (potion_id, ingredient_id, qty)
+select p.potion_id, i.ingredient_id, 2
+from potions p
+join ingredients i on i.name = 'Thistle'
+where p.potion_no = 27;
+
+-- Instruction variants
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Any Level'
+from potions p
+where p.potion_no = 1;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Level 18+'
+from potions p
+where p.potion_no = 1;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Any Level'
+from potions p
+where p.potion_no = 2;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Level 12+'
+from potions p
+where p.potion_no = 2;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Any Level'
+from potions p
+where p.potion_no = 3;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Level 12+'
+from potions p
+where p.potion_no = 3;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Any Level'
+from potions p
+where p.potion_no = 4;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Level 14+'
+from potions p
+where p.potion_no = 4;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Any Level'
+from potions p
+where p.potion_no = 5;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Level 28+'
+from potions p
+where p.potion_no = 5;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Any Level'
+from potions p
+where p.potion_no = 6;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Level 28+'
+from potions p
+where p.potion_no = 6;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Any Level'
+from potions p
+where p.potion_no = 7;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Level 18+'
+from potions p
+where p.potion_no = 7;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Any Level'
+from potions p
+where p.potion_no = 8;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Level 28+'
+from potions p
+where p.potion_no = 8;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Any Level'
+from potions p
+where p.potion_no = 9;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Level 16+'
+from potions p
+where p.potion_no = 9;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Any Level'
+from potions p
+where p.potion_no = 10;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Level 18+'
+from potions p
+where p.potion_no = 10;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Any Level'
+from potions p
+where p.potion_no = 11;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Level 18+'
+from potions p
+where p.potion_no = 11;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Any Level'
+from potions p
+where p.potion_no = 12;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Any Level'
+from potions p
+where p.potion_no = 13;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Level 14+'
+from potions p
+where p.potion_no = 13;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Any Level'
+from potions p
+where p.potion_no = 14;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Level 18+?'
+from potions p
+where p.potion_no = 14;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Any Level'
+from potions p
+where p.potion_no = 15;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Level 22+'
+from potions p
+where p.potion_no = 15;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Any Level'
+from potions p
+where p.potion_no = 16;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Level 16+'
+from potions p
+where p.potion_no = 16;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Any Level'
+from potions p
+where p.potion_no = 17;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Level 16+'
+from potions p
+where p.potion_no = 17;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Any Level'
+from potions p
+where p.potion_no = 18;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Level 16+'
+from potions p
+where p.potion_no = 18;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Any Level'
+from potions p
+where p.potion_no = 19;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Level 18+'
+from potions p
+where p.potion_no = 19;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Any Level'
+from potions p
+where p.potion_no = 20;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Level 18+'
+from potions p
+where p.potion_no = 20;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Any Level'
+from potions p
+where p.potion_no = 21;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Any Level'
+from potions p
+where p.potion_no = 22;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Level 18+'
+from potions p
+where p.potion_no = 22;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Any Level'
+from potions p
+where p.potion_no = 23;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Level 20+'
+from potions p
+where p.potion_no = 23;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Any Level'
+from potions p
+where p.potion_no = 24;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Level 24+'
+from potions p
+where p.potion_no = 24;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Any Level'
+from potions p
+where p.potion_no = 25;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Level 22+'
+from potions p
+where p.potion_no = 25;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Any Level'
+from potions p
+where p.potion_no = 26;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Level 14+'
+from potions p
+where p.potion_no = 26;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Any Level'
+from potions p
+where p.potion_no = 27;
+insert into instruction_variants (potion_id, label)
+select p.potion_id, 'Level 16+'
+from potions p
+where p.potion_no = 27;
+
+-- Instruction steps
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Spirits** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 1 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Put **x2 Comfrey** into **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 1 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 1 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Add **x1 Boar’s Tusk** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 1 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 1 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'Put **x1 Belladonna** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 1 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'Put the contents of the **Mortar** into the **Dish**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 1 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, '**Raise** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 1 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 9, 'Add the contents of the **Dish** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 1 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 10, '**Distil** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 1 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Spirits** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 1 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Put **x2 Comfrey** into **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 1 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 1 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Add **x1 Boar’s Tusk** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 1 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 1 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'Put **x1 Belladonna** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 1 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 1 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, 'While the animation is playing, repeatedly press the **Raise Cauldron** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 1 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 9, '**Distil** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 1 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Water** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 2 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Add **x2 Dandelion** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 2 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 2 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Put **x1 Marigold** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 2 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 2 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'While the animation is playing, repeatedly press the turn **Hourglass** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 2 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'Wait until the **Hourglass** runs out'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 2 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, '**Distil** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 2 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Water** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 2 and iv.label = 'Level 12+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Add **x2 Dandelion** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 2 and iv.label = 'Level 12+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 2 and iv.label = 'Level 12+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Put **x1 Marigold** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 2 and iv.label = 'Level 12+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 2 and iv.label = 'Level 12+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, '**Distil** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 2 and iv.label = 'Level 12+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Spirits** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 3 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Add **x1 Sage** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 3 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 3 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Put **x2 Wormwood** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 3 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 3 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'While the animation is playing, repeatedly press the turn **Hourglass** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 3 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'When the **Hourglass** is halfway, **Distil** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 3 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Spirits** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 3 and iv.label = 'Level 12+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Add **x1 Sage** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 3 and iv.label = 'Level 12+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 3 and iv.label = 'Level 12+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Put **x2 Wormwood** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 3 and iv.label = 'Level 12+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 3 and iv.label = 'Level 12+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, '**Distil** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 3 and iv.label = 'Level 12+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Wine** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 4 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Add **x1 Wormwood** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 4 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 4 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Put **x2 Belladonna** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 4 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 4 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'Pump the **Bellows x5** times'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 4 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, '**Raise** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 4 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, 'Add **x1 Amanita Muscaria** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 4 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 9, '**Distil** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 4 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Wine** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 4 and iv.label = 'Level 14+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Add **x1 Wormwood** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 4 and iv.label = 'Level 14+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 4 and iv.label = 'Level 14+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Put **x2 Belladonna** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 4 and iv.label = 'Level 14+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 4 and iv.label = 'Level 14+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'Pump the **Bellows x1** time'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 4 and iv.label = 'Level 14+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'Add **x1 Amanita Muscaria** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 4 and iv.label = 'Level 14+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, 'While the animation is playing, repeatedly press the **Raise Cauldron** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 4 and iv.label = 'Level 14+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 9, '**Distil** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 4 and iv.label = 'Level 14+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Spirits** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 5 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Add **x2 Eyebright** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 5 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 5 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'While the animation is playing, repeatedly press the turn **Hourglass** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 5 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Wait until the **Hourglass** runs out'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 5 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'Put **x1 St. John’s Wort** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 5 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'Put the contents of the **Mortar** into the **Dish**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 5 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, '**Raise** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 5 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 9, 'Add the contents of the **Dish** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 5 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 10, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 5 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 11, 'Pump the **Bellows x5** times'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 5 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 12, '**Raise** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 5 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 13, '**Distil** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 5 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Spirits** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 5 and iv.label = 'Level 28+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Add **x2 Eyebright** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 5 and iv.label = 'Level 28+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 5 and iv.label = 'Level 28+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Put **x1 St. John’s Wort** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 5 and iv.label = 'Level 28+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 5 and iv.label = 'Level 28+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'Pump the **Bellows x1** time'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 5 and iv.label = 'Level 28+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, '**Raise** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 5 and iv.label = 'Level 28+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, '**Distil** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 5 and iv.label = 'Level 28+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Oil** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 6 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Put **x1 St. John’s Wort** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 6 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 6 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Add **x1 Comfrey** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 6 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 6 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'While the animation is playing, repeatedly press the turn **Hourglass** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 6 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'Just before the **Hourglass** runs out, add **x1 Dandelion** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 6 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, 'Pump the **Bellows x5** times'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 6 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 9, '**Raise** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 6 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 10, '**Pour** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 6 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Oil** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 6 and iv.label = 'Level 28+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Put **x1 St. John’s Wort** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 6 and iv.label = 'Level 28+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 6 and iv.label = 'Level 28+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Add **x1 Comfrey** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 6 and iv.label = 'Level 28+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 6 and iv.label = 'Level 28+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'Add **x1 Dandelion** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 6 and iv.label = 'Level 28+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'Pump the **Bellows x1** times'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 6 and iv.label = 'Level 28+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, '**Raise** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 6 and iv.label = 'Level 28+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 9, '**Pour** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 6 and iv.label = 'Level 28+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Wine** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 7 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Put **x1 Sage** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 7 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, 'Put the contents of the **Mortar** into the **Dish**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 7 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Add **x2 Chamomile** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 7 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 7 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'Turn the **Hourglass**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 7 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'Just before the **Hourglass** runs out, **Raise** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 7 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, 'Add the contents of the **Dish** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 7 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 9, '**Pour** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 7 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Wine** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 7 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Put **x1 Sage** into the **Mortar** but do not grind it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 7 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, 'Add **x2 Chamomile** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 7 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 7 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, '**Grind** the contents of the **Mortar**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 7 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 7 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'While the animation is playing, repeatedly press the **Raise Cauldron** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 7 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, '**Pour** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 7 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Spirits** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 8 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Put **x2 Mint** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 8 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 8 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 8 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'While the animation is playing, repeatedly press the turn **Hourglass** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 8 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'Just before the **Hourglass** runs out, add **x1 Valerian** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 8 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'While the animation is playing, repeatedly press the turn **Hourglass** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 8 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, 'Wait until the **Hourglass** runs out'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 8 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 9, '**Distil** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 8 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Spirits** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 8 and iv.label = 'Level 28+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Put **x2 Mint** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 8 and iv.label = 'Level 28+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 8 and iv.label = 'Level 28+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 8 and iv.label = 'Level 28+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Add **x1 Valerian** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 8 and iv.label = 'Level 28+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, '**Distil** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 8 and iv.label = 'Level 28+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Water** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 9 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Add **x2 Thistle** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 9 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 9 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'While the animation is playing, repeatedly press the turn **Hourglass** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 9 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'When the **Hourglass** is halfway, put **x1 Nettle** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 9 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 9 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'While the animation is playing, repeatedly press the turn **Hourglass** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 9 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, 'When the **Hourglass** is halfway, **Raise** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 9 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 9, 'Put **x1 Charcoal** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 9 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 10, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 9 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 11, '**Pour** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 9 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Water** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 9 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Add **x2 Thistle** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 9 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 9 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Put **x1 Charcoal** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 9 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Put the contents of the **Mortar** into the **Dish**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 9 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'Put **x1 Nettle** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 9 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 9 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, 'Add the contents of the **Dish** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 9 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 9, 'While the animation is playing, repeatedly press the **Raise Cauldron** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 9 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 10, '**Pour** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 9 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Spirits** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 10 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Add **x2 Herb Paris** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 10 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 10 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'While the animation is playing, repeatedly press the turn **Hourglass** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 10 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Just before the **Hourglass** runs out, turn the **Hourglass** again**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 10 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'When the **Hourglass** is halfway, put **x1 Valerian** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 10 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 10 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, 'While the animation is playing, repeatedly press the turn **Hourglass** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 10 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 9, 'When the **Hourglass** is halfway, **Distil** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 10 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Spirits** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 10 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Add **x2 Herb Paris** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 10 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 10 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Put **x1 Valerian** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 10 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 10 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, '**Distil** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 10 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Oil** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 11 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Add **x1 Poppy** and **x1 Valerian** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 11 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 11 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Put **x1 Eyebright** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 11 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Put the contents of the **Mortar** into the **Dish**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 11 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, '**Raise** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 11 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'Add the contents of the **Dish** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 11 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, 'Add **x1 Boar’s Tusk** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 11 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 9, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 11 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 10, '**Pour** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 11 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Oil** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 11 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Add **x1 Poppy** and **x1 Valerian** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 11 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 11 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Put **x1 Eyebright** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 11 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 11 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'While the animation is playing, repeatedly press the **Raise Cauldron** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 11 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'Add **x1 Boar’s Tusk** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 11 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 11 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 9, '**Pour** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 11 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Wine** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 12 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Add **x3 Feverfew** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 12 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 12 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Put **x1 Elderberry Leaves** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 12 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 12 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'While the animation is playing, repeatedly press the **Raise Cauldron** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 12 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'Add **x2 Ginger** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 12 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, '**Distil** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 12 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Oil** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 13 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Put **x1 Nettle** and **x1 St. John’s Wort** the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 13 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 13 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 13 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Put **x1 Charcoal** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 13 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'Put the contents of the **Mortar** into the **Dish**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 13 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, '**Raise** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 13 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, 'Add the contents of the **Dish** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 13 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 9, 'Add **x1 Belladonna** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 13 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 10, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 13 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 11, '**Pour** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 13 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Oil** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 13 and iv.label = 'Level 14+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Put **x1 Nettle** and **x1 St. John’s Wort** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 13 and iv.label = 'Level 14+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 13 and iv.label = 'Level 14+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 13 and iv.label = 'Level 14+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Put **x1 Charcoal** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 13 and iv.label = 'Level 14+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 13 and iv.label = 'Level 14+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'While the animation is playing, repeatedly press the **Raise Cauldron** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 13 and iv.label = 'Level 14+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, 'Add **x1 Belladonna** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 13 and iv.label = 'Level 14+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 9, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 13 and iv.label = 'Level 14+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 10, '**Pour** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 13 and iv.label = 'Level 14+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Water** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 14 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Add **x1 Sage** & **x1 St. John’s Wort** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 14 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 14 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'While the animation is playing, repeatedly press the turn **Hourglass** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 14 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Just before the **Hourglass** runs out, turn the **Hourglass** again**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 14 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'When the **Hourglass** is halfway, put **x1 Mint** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 14 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'Put the contents of the **Mortar** into the **Dish**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 14 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, '**Raise** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 14 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 9, 'Add the contents of the **Dish** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 14 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 10, '**Pour** the contents of the **Cauldron** into **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 14 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Water** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 14 and iv.label = 'Level 18+?';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Add **x1 Sage** & **x1 St. John’s Wort** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 14 and iv.label = 'Level 18+?';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 14 and iv.label = 'Level 18+?';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Put **x1 Mint** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 14 and iv.label = 'Level 18+?';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 14 and iv.label = 'Level 18+?';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'While the animation is playing, repeatedly press the **Raise Cauldron** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 14 and iv.label = 'Level 18+?';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, '**Pour** the contents of the **Cauldron** into **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 14 and iv.label = 'Level 18+?';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Water** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 15 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Put **x1 Saltpetre** and **x1 Sulphur** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 15 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 15 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 15 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'While the animation is playing, repeatedly press the turn **Hourglass** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 15 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'When the **Hourglass** is halfway, put **x1 Charcoal** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 15 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 15 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, 'While the animation is playing, repeatedly press the turn **Hourglass** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 15 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 9, 'When the **Hourglass** is halfway, **Pour** the contents of the **Cauldron** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 15 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Water** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 15 and iv.label = 'Level 22+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Put **x1 Saltpetre** and **x1 Sulphur** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 15 and iv.label = 'Level 22+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 15 and iv.label = 'Level 22+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 15 and iv.label = 'Level 22+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Put **x1 Charcoal** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 15 and iv.label = 'Level 22+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 15 and iv.label = 'Level 22+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, '**Pour** the contents of the **Cauldron** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 15 and iv.label = 'Level 22+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Spirits** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 16 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Put **x2 Wormwood** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 16 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 16 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Add **x1 Belladonna** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 16 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 16 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'While the animation is playing, repeatedly press the turn **Hourglass** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 16 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'Just before the **Hourglass** runs out, turn the **Hourglass** again'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 16 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, 'Just before the **Hourglass** runs out the 2nd time, turn the **Hourglass** again'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 16 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 9, 'Just before the **Hourglass** runs out the 3rd time, **Raise** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 16 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 10, 'Add **x1 Henbane** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 16 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 11, '**Distil** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 16 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Spirits** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 16 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Put **x2 Wormwood** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 16 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 16 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Add **x1 Belladonna** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 16 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 16 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'Add **x1 Henbane** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 16 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, '**Distil** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 16 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Spirits** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 17 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Add **x2 Sage** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 17 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 17 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Put **x2 Mint** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 17 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Put the contents of the **Mortar** into the **Dish**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 17 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, '**Raise** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 17 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'Add the contents of the **Dish** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 17 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, '**Pour** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 17 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Spirits** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 17 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Add **x2 Sage** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 17 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 17 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Put **x2 Mint** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 17 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 17 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'While the animation is playing, repeatedly press the **Raise Cauldron** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 17 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, '**Pour** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 17 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Oil** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 18 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Add **x1 Poppy** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 18 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 18 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'While the animation is playing, repeatedly press the turn **Hourglass** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 18 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Just before the **Hourglass** runs out, add **x1 Thistle** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 18 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'While the animation is playing, repeatedly press the turn **Hourglass** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 18 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'Just before the **Hourglass** runs out, **Raise** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 18 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, 'Put **x1 Herb Paris** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 18 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 9, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 18 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 10, '**Pour** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 18 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Oil** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 18 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Add **x1 Poppy** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 18 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 18 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Put **x1 Herb Paris** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 18 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Put the contents of the **Mortar** into the **Dish**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 18 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'Add **x1 Thistle** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 18 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'Add the contents of the **Dish** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 18 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, 'While the animation is playing, repeatedly press the **Raise Cauldron** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 18 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 9, '**Pour** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 18 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Water** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 19 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Add **x1 Nettle** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 19 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 19 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Put **x2 Marigold** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 19 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Put the contents of the **Mortar** into the **Dish**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 19 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, '**Raise** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 19 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'Add the contents of the **Dish** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 19 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, '**Pour** the contents into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 19 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Water** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 19 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Add **x1 Nettle** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 19 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 19 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Put **x2 Marigold** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 19 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 19 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'While the animation is playing, repeatedly press the **Raise Cauldron** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 19 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, '**Pour** the contents into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 19 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Wine** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 20 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Put **x3 Dandelion** and **x1 Mint** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 20 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 20 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 20 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'While the animation is playing, repeatedly press the turn **Hourglass** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 20 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'Just before the **Hourglass** runs out, turn the **Hourglass** again'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 20 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'Just before the **Hourglass** runs out the 2nd time, add **x1 Marigold** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 20 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, 'Pump the **Bellows x5** times'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 20 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 9, '**Raise** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 20 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 10, '**Distil** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 20 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Wine** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 20 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Put **x3 Dandelion** and **x1 Mint** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 20 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 20 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 20 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Add **x1 Marigold** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 20 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'Pump the **Bellows x1** time'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 20 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, '**Distil** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 20 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Spirits** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 21 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Add **x2 Wormwood** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 21 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 21 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Put **x2 Mint** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 21 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 21 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, '**Distil** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 21 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Water** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 22 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Put **x2 Eyebright** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 22 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 22 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Add **x1 Belladonna** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 22 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 22 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'While the animation is playing, repeatedly press the turn **Hourglass** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 22 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'Just before the **Hourglass** runs out, turn the **Hourglass** again'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 22 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, 'When the **Hourglass** is halfway, put **x1 Chamomile** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 22 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 9, 'Put the contents of the **Mortar** into the **Dish**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 22 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 10, '**Raise** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 22 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 11, 'Add the contents of the **Dish** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 22 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 12, '**Pour** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 22 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Water** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 22 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Put **x2 Eyebright** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 22 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 22 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Add **x1 Belladonna** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 22 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 22 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'Put **x1 Chamomile** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 22 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 22 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, 'While the animation is playing, repeatedly press the **Raise Cauldron** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 22 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 9, '**Pour** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 22 and iv.label = 'Level 18+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Spirits** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 23 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Put **x3 Poppy** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 23 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 23 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Add **x1 Marigold** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 23 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 23 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'Pump the **Bellows x5 times'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 23 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'Add **x1 Comfrey** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 23 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, 'While the animation is playing, repeatedly press the turn **Hourglass** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 23 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 9, 'Just before the **Hourglass** runs out, **Distil** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 23 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Spirits** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 23 and iv.label = 'Level 20+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Put **x3 Poppy** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 23 and iv.label = 'Level 20+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 23 and iv.label = 'Level 20+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Add **x1 Marigold** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 23 and iv.label = 'Level 20+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 23 and iv.label = 'Level 20+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'Pump the **Bellows x1** time'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 23 and iv.label = 'Level 20+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'Add **x1 Comfrey** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 23 and iv.label = 'Level 20+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, '**Distil** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 23 and iv.label = 'Level 20+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Water** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 24 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Add **x1 Cobweb** and **x2 Eyebright** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 24 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 24 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'While the animation is playing, repeatedly press the turn **Hourglass** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 24 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Wait until the **Hourglass** runs out'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 24 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'Put **x2 Valerian** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 24 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 24 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, 'While the animation is playing, repeatedly press the turn **Hourglass** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 24 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 9, 'When the **Hourglass** is halfway, **Raise** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 24 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 10, '**Pour** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 24 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Water** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 24 and iv.label = 'Level 24+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Add **x1 Cobweb** and **x2 Eyebright** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 24 and iv.label = 'Level 24+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 24 and iv.label = 'Level 24+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Put **x2 Valerian** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 24 and iv.label = 'Level 24+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 24 and iv.label = 'Level 24+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, '**Pour** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 24 and iv.label = 'Level 24+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Wine** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 25 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Add **x1 Nettle** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 25 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 25 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Put **x2 Belladonna** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 25 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 25 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'While the animation is playing, repeatedly press the turn **Hourglass** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 25 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'When the **Hourglass** is halfway, **Raise** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 25 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, '**Pour** contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 25 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Wine** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 25 and iv.label = 'Level 22+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Add **x1 Nettle** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 25 and iv.label = 'Level 22+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 25 and iv.label = 'Level 22+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, 'Put **x2 Belladonna** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 25 and iv.label = 'Level 22+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 25 and iv.label = 'Level 22+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, '**Pour** contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 25 and iv.label = 'Level 22+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Water** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 26 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Put **x1 Saltpetre** and **x1 Sulphur** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 26 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 26 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 26 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'While the animation is playing, repeatedly press the turn **Hourglass** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 26 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'Just before the **Hourglass** runs out, turn the **Hourglass**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 26 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'When the **Hourglass** is halfway, put **x1 Leached Coal** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 26 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 26 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 9, '**Pour** the contents of the **Cauldron** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 26 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Water** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 26 and iv.label = 'Level 14+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Put **x1 Saltpetre** and **x1 Sulphur** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 26 and iv.label = 'Level 14+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 26 and iv.label = 'Level 14+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 26 and iv.label = 'Level 14+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Put **x1 Leached Coal** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 26 and iv.label = 'Level 14+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 26 and iv.label = 'Level 14+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, '**Pour** the contents of the **Cauldron** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 26 and iv.label = 'Level 14+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Oil** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 27 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Put **x2 Thistle** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 27 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 27 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 27 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Put **x1 Charcoal** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 27 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'Put the contents of the **Mortar** into the **Dish**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 27 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'Add **x1 Dandelion** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 27 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, 'While the animation is playing, repeatedly press the turn **Hourglass** button'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 27 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 9, 'Just before the **Hourglass** runs out, **Raise** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 27 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 10, 'Add the contents of the **Dish** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 27 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 11, '**Pour** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 27 and iv.label = 'Any Level';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 1, 'Add **Oil** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 27 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 2, 'Put **x2 Thistle** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 27 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 3, 'Add the contents of the **Mortar** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 27 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 4, '**Lower** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 27 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 5, 'Put **x1 Charcoal** into the **Mortar** and **Grind** it'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 27 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 6, 'Put the contents of the **Mortar** into the **Dish**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 27 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 7, 'Add **x1 Dandelion** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 27 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 8, 'Add the contents of the **Dish** to the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 27 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 9, 'While the animation is playing, **Raise** the **Cauldron**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 27 and iv.label = 'Level 16+';
+insert into instruction_steps (variant_id, step_no, step_text)
+select iv.variant_id, 10, '**Pour** the contents of the **Cauldron** into a **Phial**'
+from instruction_variants iv
+join potions p on p.potion_id = iv.potion_id
+where p.potion_no = 27 and iv.label = 'Level 16+';
+
+-- Potion effects
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Weak', 'Increases your Horsemanship and Houndmaster skills by 3 for 6 hours. Animals pay less attention to Henry.'
+from potions p
+where p.potion_no = 1;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Standard', 'Increases your Horsemanship and Houndmaster skills by 3 for 12 hours. Animals pay less attention to Henry.'
+from potions p
+where p.potion_no = 1;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Strong', 'Increases your Horsemanship and Houndmaster skills by 5 for 12 hours. Dogs won''t notice Henry at all, while other animals will take measurably longer to react to him.'
+from potions p
+where p.potion_no = 1;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Henry''s', 'Increases your Horsemanship and Houndmaster skills by 7 for 1 full day. Dogs won''t notice Henry at all, while other animals will take measurably longer to react to him.'
+from potions p
+where p.potion_no = 1;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Weak', 'You lose 15% less Health when struck for 5 minutes.'
+from potions p
+where p.potion_no = 2;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Standard', 'You lose 15% less Health when struck for 10 minutes. If you''re Bleeding, the effect is slowed by 10%.'
+from potions p
+where p.potion_no = 2;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Strong', 'You lose 50% less Health when struck for 10 minutes. If you''re Bleeding, the effect is slowed by 50%.'
+from potions p
+where p.potion_no = 2;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Henry''s', 'You lose 60% less Health when struck for 15 minutes. If you''re Bleeding, the effect is slowed by 60%.'
+from potions p
+where p.potion_no = 2;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Weak', 'Increases Strength by 2 for 10 minutes.'
+from potions p
+where p.potion_no = 3;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Standard', 'Increases Strength by 4 for 10 minutes.'
+from potions p
+where p.potion_no = 3;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Strong', 'Increases Strength by 6 for 10 minutes. In addition, attack and defence cost 20% less Stamina.'
+from potions p
+where p.potion_no = 3;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Henry''s', 'Increases Strength by 6 for 15 minutes. In addition, attack and defence cost 35% less Stamina.'
+from potions p
+where p.potion_no = 3;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Weak', 'Poisoned characters cannot run and lose 110 Health in 60 seconds.'
+from potions p
+where p.potion_no = 4;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Standard', 'Poisoned characters cannot run and lose 110 Health in 45 seconds.'
+from potions p
+where p.potion_no = 4;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Strong', 'Poisoned characters cannot run and lose 110 Health in 30 seconds.'
+from potions p
+where p.potion_no = 4;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Henry''s', 'Poisoned characters cannot run and lose 110 Health in 15 seconds.'
+from potions p
+where p.potion_no = 4;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Weak', 'Increases your Marksmanship by 3 for 10 minutes.'
+from potions p
+where p.potion_no = 5;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Standard', 'Increases your Marksmanship by 3 and lowers Stamina drain from aiming by 20% for 10 minutes.'
+from potions p
+where p.potion_no = 5;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Strong', 'Increases your Marksmanship by 5 and lowers Stamina drain from aiming by 50% for 10 minutes.'
+from potions p
+where p.potion_no = 5;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Henry''s', 'Increases Marksmanship by 8 for 15 minutes. While the potion lasts, aiming does not cost Stamina at all.'
+from potions p
+where p.potion_no = 5;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Weak', 'Increases Stamina by 25% for 20 minutes.'
+from potions p
+where p.potion_no = 6;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Standard', 'Increases Stamina by 30% for 20 minutes.'
+from potions p
+where p.potion_no = 6;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Strong', 'Increases Stamina by 30% and improves Stamina regeneration by 15% for 40 minutes.'
+from potions p
+where p.potion_no = 6;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Henry''s', 'Increases Stamina by 60% and improves Stamina regeneration by 30% for 1 hour.'
+from potions p
+where p.potion_no = 6;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Weak', 'For 12 hours, sleep restores lost health at 200% efficiency.'
+from potions p
+where p.potion_no = 7;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Standard', 'For 24 hours, sleep restores lost health at 300% efficiency.'
+from potions p
+where p.potion_no = 7;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Strong', 'For 24 hours, sleep restores lost health at 300% efficiency and regenerates energy 200% faster.'
+from potions p
+where p.potion_no = 7;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Henry''s', 'For 48 hours, sleep restores lost health at 500% efficiency and regenerates energy 300% faster.'
+from potions p
+where p.potion_no = 7;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Weak', 'Current Energy +10.'
+from potions p
+where p.potion_no = 8;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Standard', 'Current Energy +20.'
+from potions p
+where p.potion_no = 8;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Strong', 'Current Energy +20. Your Energy drains 20% slower for 12 hours.'
+from potions p
+where p.potion_no = 8;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Henry''s', 'Current Energy +30. Your Energy drains 50% slower for 24 hours.'
+from potions p
+where p.potion_no = 8;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Weak', 'Cures food poisoning, but decreases Nourishment by 20.'
+from potions p
+where p.potion_no = 9;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Standard', 'Cures all poisons and increases Vitality by 1 for 10 minutes, but decreases Nourishment by 20.'
+from potions p
+where p.potion_no = 9;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Strong', 'Cures all poisons and increases Vitality by 2 for 10 minutes, but decreases Nourishment by 20.'
+from potions p
+where p.potion_no = 9;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Henry''s', 'Cures all poisons and increases Vitality by 3 for 20 minutes, but decreases Nourishment by 20.'
+from potions p
+where p.potion_no = 9;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Weak', 'Victims cannot run and all their weapon skills are reduced by 3.'
+from potions p
+where p.potion_no = 10;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Standard', 'Victims cannot run, all their weapon skills are reduced by 3, and they gradually suffer 20 damage.'
+from potions p
+where p.potion_no = 10;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Strong', 'Victims cannot run, all their weapon skills are reduced by 4, and they gradually suffer 30 damage.'
+from potions p
+where p.potion_no = 10;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Henry''s', 'Victims cannot run, all their weapon skills are reduced by 5, and they gradually suffer 50 damage.'
+from potions p
+where p.potion_no = 10;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Weak', 'Adds 2 to Agility for 10 minutes.'
+from potions p
+where p.potion_no = 11;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Standard', 'Adds 4 to Agility and lowers the Stamina cost of sprinting by 10% for 10 minutes.'
+from potions p
+where p.potion_no = 11;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Strong', 'Adds 4 to Agility and lowers the Stamina cost of sprinting by 20% for 10 minutes.'
+from potions p
+where p.potion_no = 11;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Henry''s', 'Adds 6 to Agility and lowers the Stamina cost of sprinting by 30% for 10 minutes.'
+from potions p
+where p.potion_no = 11;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Standard', 'Fever and related complications can often end in death. This tonic reduces fever if given in time.'
+from potions p
+where p.potion_no = 12;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Weak', 'Your Speech goes up by 3 for 12 hours.'
+from potions p
+where p.potion_no = 13;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Standard', 'Your Speech goes up by 3 and you can complete skill books much faster for 1 day.'
+from potions p
+where p.potion_no = 13;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Strong', 'Your Speech goes up by 5 and you can complete skill books much faster for 1 day.'
+from potions p
+where p.potion_no = 13;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Henry''s', 'Your Speech goes up by 7, you can complete skill books much faster, and you get a 50% boost to earned experience for 2 days.'
+from potions p
+where p.potion_no = 13;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Weak', 'Decreases your current drunkenness.'
+from potions p
+where p.potion_no = 14;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Standard', 'Decreases your current drunkenness or cures a hangover.'
+from potions p
+where p.potion_no = 14;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Strong', 'Rapidly sobers you up and cures hangovers.'
+from potions p
+where p.potion_no = 14;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Henry''s', 'Sobers you up, cures your hangover, and temporarily removes the effects of alcoholism.'
+from potions p
+where p.potion_no = 14;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Standard', 'Gunpowder used to fire lead shot that even the best plate armour can''t stop at close range. For safety reasons, load only when sober.'
+from potions p
+where p.potion_no = 15;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Standard', 'If you want to put to rights the imprudent choices of your life, all it takes is 1 mouthful, and you can choose your perks anew. Beware, though, the process is irreversible and painful!'
+from potions p
+where p.potion_no = 16;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Weak', 'Increases Charisma by 3 for 3 minutes. If used at the same time as another perfume, lowers your Charisma by 7.'
+from potions p
+where p.potion_no = 17;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Standard', 'Increases Charisma by 4 for 3 minutes. If used at the same time as another perfume, lowers your Charisma by 7.'
+from potions p
+where p.potion_no = 17;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Strong', 'Increases Charisma by 7 for 3 minutes. If used at the same time as another perfume, lowers your Charisma by 7.'
+from potions p
+where p.potion_no = 17;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Henry''s', 'Increases Charisma by 10 for 3 minutes. If used at the same time as another perfume, lowers your Charisma by 7.'
+from potions p
+where p.potion_no = 17;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Weak', 'Reduces Energy to 0 and lowers perception.'
+from potions p
+where p.potion_no = 18;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Standard', 'Reduces Energy to 0 and lowers perception. Victims suffer 10% lower Stamina and Stamina regeneration for 6 hours.'
+from potions p
+where p.potion_no = 18;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Strong', 'Reduces Energy to 0 and lowers perception. Victims suffer 30% lower Stamina and Stamina regeneration for 12 hours.'
+from potions p
+where p.potion_no = 18;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Henry''s', 'Reduces Energy to 0 and lowers perception. Victims suffer 50% lower Stamina and Stamina regeneration for 24 hours.'
+from potions p
+where p.potion_no = 18;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Weak', 'Heals 15 health over the course of 1 minute. Hangovers pass 50% faster.'
+from potions p
+where p.potion_no = 19;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Standard', 'Heals 25 health over the course of 1 minute. Hangovers pass 100% faster.'
+from potions p
+where p.potion_no = 19;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Strong', 'Heals 40 health over the course of 1 minute. Instantly cures hangovers.'
+from potions p
+where p.potion_no = 19;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Henry''s', 'Heals 60 health over the course of 1 minute. Instantly cures hangovers.'
+from potions p
+where p.potion_no = 19;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Weak', 'Increases your Charisma by 1 for 20 minutes, but lowers it by 5 if used in conjunction with another perfume.'
+from potions p
+where p.potion_no = 20;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Standard', 'Increases your Charisma by 2 for 20 minutes, but lowers it by 5 if used in conjunction with another perfume.'
+from potions p
+where p.potion_no = 20;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Strong', 'Increases your Charisma by 3 for 30 minutes, but lowers it by 5 if used in conjunction with another perfume.'
+from potions p
+where p.potion_no = 20;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Henry''s', 'Increases your Charisma by 5 for 40 minutes, but lowers it by 5 if used in conjunction with another perfume.'
+from potions p
+where p.potion_no = 20;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Standard', 'Henry''s home-made moonshine. A strong drink that is sure to put you in a good mood.'
+from potions p
+where p.potion_no = 21;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Weak', 'You gain enhanced night vision for 10 minutes.'
+from potions p
+where p.potion_no = 22;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Standard', 'You gain enhanced night vision for 15 minutes. Your Energy depletes 25% slower.'
+from potions p
+where p.potion_no = 22;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Strong', 'You gain enhanced night vision for 20 minutes. Your Energy depletes 50% slower.'
+from potions p
+where p.potion_no = 22;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Henry''s', 'You gain enhanced night vision for 25 minutes. While the potion lasts, your Energy does not deplete at all.'
+from potions p
+where p.potion_no = 22;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Weak', 'Your maximum Stamina decreases 15% less than your health for 10 minutes. Injuries do not impede Henry''s actions for the potion''s duration.'
+from potions p
+where p.potion_no = 23;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Standard', 'Your maximum Stamina decreases 30% less than your health for 15 minutes. Injuries do not impede Henry''s actions for the potion''s duration.'
+from potions p
+where p.potion_no = 23;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Strong', 'Your maximum Stamina decreases 50% less than your health for 20 minutes. Injuries do not impede Henry''s actions for the potion''s duration.'
+from potions p
+where p.potion_no = 23;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Henry''s', 'Your maximum Stamina decreases 75% less than your health for 25 minutes. Injuries do not impede Henry''s actions for the potion''s duration.'
+from potions p
+where p.potion_no = 23;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Weak', 'Increases Craftsmanship and Thievery by 2 for 20 minutes.'
+from potions p
+where p.potion_no = 24;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Standard', 'Increases Craftsmanship and Thievery by 4 for 20 minutes.'
+from potions p
+where p.potion_no = 24;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Strong', 'Increases Craftsmanship and Thievery by 6 for 20 minutes.'
+from potions p
+where p.potion_no = 24;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Henry''s', 'Increases Craftsmanship and Thievery by 8 for 60 minutes.'
+from potions p
+where p.potion_no = 24;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Weak', 'Saves your game. You''ll start from exactly where you were standing when you drank the schnapps.'
+from potions p
+where p.potion_no = 25;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Standard', 'Saves your game, restores 10 health, and boosts your Strength, Vitality, and Agility by 1 for 3 minutes.'
+from potions p
+where p.potion_no = 25;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Strong', 'Saves your game, restores 20 health, and boosts your Strength, Vitality, and Agility by 2 for 3 minutes.'
+from potions p
+where p.potion_no = 25;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Henry''s', 'Saves your game, restores 30 health, and boosts your Strength, Vitality, and Agility by 3 for 3 minutes.'
+from potions p
+where p.potion_no = 25;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Standard', 'Gunpowder used to fire scrap iron and other small projectiles. Will pierce anything with ease at close range, but is ineffective at long range. For safety reasons, load only when sober.'
+from potions p
+where p.potion_no = 26;
+insert into potion_effects (potion_id, quality, effect_text)
+select p.potion_id, 'Standard', 'You can''t wash your own clothes without soap.'
+from potions p
+where p.potion_no = 27;
+
+-- Potion quantity requirements
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'No Perks', 3
+from potions p
+where p.potion_no = 1
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'No Perks'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secret of Matter I', 4
+from potions p
+where p.potion_no = 1
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secret of Matter I'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter II', 5
+from potions p
+where p.potion_no = 1
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter I + II', 6
+from potions p
+where p.potion_no = 1
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter I + II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'No Perks', 3
+from potions p
+where p.potion_no = 2
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'No Perks'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secret of Matter I', 4
+from potions p
+where p.potion_no = 2
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secret of Matter I'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter II', 5
+from potions p
+where p.potion_no = 2
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter I + II', 6
+from potions p
+where p.potion_no = 2
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter I + II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'No Perks', 3
+from potions p
+where p.potion_no = 3
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'No Perks'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secret of Matter I', 4
+from potions p
+where p.potion_no = 3
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secret of Matter I'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter II', 5
+from potions p
+where p.potion_no = 3
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter I + II', 6
+from potions p
+where p.potion_no = 3
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter I + II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'No Perks', 3
+from potions p
+where p.potion_no = 4
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'No Perks'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secret of Matter I', 4
+from potions p
+where p.potion_no = 4
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secret of Matter I'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter II', 5
+from potions p
+where p.potion_no = 4
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter I + II', 6
+from potions p
+where p.potion_no = 4
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter I + II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'No Perks', 3
+from potions p
+where p.potion_no = 5
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'No Perks'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secret of Matter I', 4
+from potions p
+where p.potion_no = 5
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secret of Matter I'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter II', 5
+from potions p
+where p.potion_no = 5
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter I + II', 6
+from potions p
+where p.potion_no = 5
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter I + II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'No Perks', 3
+from potions p
+where p.potion_no = 6
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'No Perks'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secret of Matter I', 4
+from potions p
+where p.potion_no = 6
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secret of Matter I'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter II', 5
+from potions p
+where p.potion_no = 6
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter I + II', 6
+from potions p
+where p.potion_no = 6
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter I + II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'No Perks', 3
+from potions p
+where p.potion_no = 7
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'No Perks'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secret of Matter I', 4
+from potions p
+where p.potion_no = 7
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secret of Matter I'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter II', 5
+from potions p
+where p.potion_no = 7
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter I + II', 6
+from potions p
+where p.potion_no = 7
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter I + II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'No Perks', 3
+from potions p
+where p.potion_no = 8
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'No Perks'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secret of Matter I', 4
+from potions p
+where p.potion_no = 8
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secret of Matter I'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter II', 5
+from potions p
+where p.potion_no = 8
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter I + II', 6
+from potions p
+where p.potion_no = 8
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter I + II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'No Perks', 3
+from potions p
+where p.potion_no = 9
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'No Perks'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secret of Matter I', 4
+from potions p
+where p.potion_no = 9
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secret of Matter I'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter II', 5
+from potions p
+where p.potion_no = 9
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter I + II', 6
+from potions p
+where p.potion_no = 9
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter I + II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'No Perks', 3
+from potions p
+where p.potion_no = 10
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'No Perks'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secret of Matter I', 4
+from potions p
+where p.potion_no = 10
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secret of Matter I'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter II', 5
+from potions p
+where p.potion_no = 10
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter I + II', 6
+from potions p
+where p.potion_no = 10
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter I + II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'No Perks', 3
+from potions p
+where p.potion_no = 11
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'No Perks'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secret of Matter I', 4
+from potions p
+where p.potion_no = 11
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secret of Matter I'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter II', 5
+from potions p
+where p.potion_no = 11
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter I + II', 6
+from potions p
+where p.potion_no = 11
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter I + II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'No Perks', 1
+from potions p
+where p.potion_no = 12
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'No Perks'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secret of Matter I', 2
+from potions p
+where p.potion_no = 12
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secret of Matter I'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter II', 3
+from potions p
+where p.potion_no = 12
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter I + II', 4
+from potions p
+where p.potion_no = 12
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter I + II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'No Perks', 3
+from potions p
+where p.potion_no = 13
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'No Perks'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secret of Matter I', 4
+from potions p
+where p.potion_no = 13
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secret of Matter I'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter II', 5
+from potions p
+where p.potion_no = 13
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter I + II', 6
+from potions p
+where p.potion_no = 13
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter I + II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'No Perks', 3
+from potions p
+where p.potion_no = 14
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'No Perks'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secret of Matter I', 4
+from potions p
+where p.potion_no = 14
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secret of Matter I'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter II', 5
+from potions p
+where p.potion_no = 14
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter I + II', 6
+from potions p
+where p.potion_no = 14
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter I + II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'No Perks', 7
+from potions p
+where p.potion_no = 15
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'No Perks'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secret of Matter I', 8
+from potions p
+where p.potion_no = 15
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secret of Matter I'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter II', 9
+from potions p
+where p.potion_no = 15
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter I + II', 10
+from potions p
+where p.potion_no = 15
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter I + II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'No Perks', 10
+from potions p
+where p.potion_no = 15
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'No Perks'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secret of Matter I', 11
+from potions p
+where p.potion_no = 15
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secret of Matter I'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter II', 12
+from potions p
+where p.potion_no = 15
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter I + II', 13
+from potions p
+where p.potion_no = 15
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter I + II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'No Perks', 3
+from potions p
+where p.potion_no = 16
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'No Perks'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secret of Matter I', 4
+from potions p
+where p.potion_no = 16
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secret of Matter I'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter II', 5
+from potions p
+where p.potion_no = 16
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter I + II', 6
+from potions p
+where p.potion_no = 16
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter I + II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'No Perks', 3
+from potions p
+where p.potion_no = 17
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'No Perks'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secret of Matter I', 4
+from potions p
+where p.potion_no = 17
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secret of Matter I'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter II', 5
+from potions p
+where p.potion_no = 17
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter I + II', 6
+from potions p
+where p.potion_no = 17
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter I + II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'No Perks', 3
+from potions p
+where p.potion_no = 18
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'No Perks'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secret of Matter I', 4
+from potions p
+where p.potion_no = 18
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secret of Matter I'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter II', 5
+from potions p
+where p.potion_no = 18
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter I + II', 6
+from potions p
+where p.potion_no = 18
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter I + II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'No Perks', 3
+from potions p
+where p.potion_no = 19
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'No Perks'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secret of Matter I', 4
+from potions p
+where p.potion_no = 19
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secret of Matter I'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter II', 5
+from potions p
+where p.potion_no = 19
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter I + II', 6
+from potions p
+where p.potion_no = 19
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter I + II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'No Perks', 3
+from potions p
+where p.potion_no = 20
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'No Perks'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secret of Matter I', 4
+from potions p
+where p.potion_no = 20
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secret of Matter I'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter II', 5
+from potions p
+where p.potion_no = 20
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter I + II', 6
+from potions p
+where p.potion_no = 20
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter I + II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'No Perks', 6
+from potions p
+where p.potion_no = 21
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'No Perks'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secret of Matter I', 7
+from potions p
+where p.potion_no = 21
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secret of Matter I'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter II', 8
+from potions p
+where p.potion_no = 21
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter I + II', 11
+from potions p
+where p.potion_no = 21
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter I + II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'No Perks', 3
+from potions p
+where p.potion_no = 22
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'No Perks'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secret of Matter I', 4
+from potions p
+where p.potion_no = 22
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secret of Matter I'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter II', 5
+from potions p
+where p.potion_no = 22
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter I + II', 6
+from potions p
+where p.potion_no = 22
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter I + II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'No Perks', 3
+from potions p
+where p.potion_no = 23
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'No Perks'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secret of Matter I', 4
+from potions p
+where p.potion_no = 23
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secret of Matter I'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter II', 5
+from potions p
+where p.potion_no = 23
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter I + II', 6
+from potions p
+where p.potion_no = 23
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter I + II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'No Perks', 3
+from potions p
+where p.potion_no = 24
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'No Perks'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secret of Matter I', 4
+from potions p
+where p.potion_no = 24
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secret of Matter I'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter II', 5
+from potions p
+where p.potion_no = 24
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter I + II', 6
+from potions p
+where p.potion_no = 24
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter I + II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'No Perks', 3
+from potions p
+where p.potion_no = 25
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'No Perks'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secret of Matter I', 4
+from potions p
+where p.potion_no = 25
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secret of Matter I'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter II', 5
+from potions p
+where p.potion_no = 25
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter I + II', 6
+from potions p
+where p.potion_no = 25
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter I + II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'No Perks', 10
+from potions p
+where p.potion_no = 26
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'No Perks'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secret of Matter I', 11
+from potions p
+where p.potion_no = 26
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secret of Matter I'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter II', 12
+from potions p
+where p.potion_no = 26
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter I + II', 13
+from potions p
+where p.potion_no = 26
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter I + II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'No Perks', 15
+from potions p
+where p.potion_no = 26
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'No Perks'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secret of Matter I', 16
+from potions p
+where p.potion_no = 26
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secret of Matter I'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter II', 17
+from potions p
+where p.potion_no = 26
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter I + II', 18
+from potions p
+where p.potion_no = 26
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter I + II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'No Perks', 6
+from potions p
+where p.potion_no = 27
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'No Perks'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secret of Matter I', 7
+from potions p
+where p.potion_no = 27
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secret of Matter I'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter II', 8
+from potions p
+where p.potion_no = 27
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter II'
+);
+insert into potion_quantity_requirements (potion_id, perk_tier, required_count)
+select p.potion_id, 'Secrets of Matter I + II', 9
+from potions p
+where p.potion_no = 27
+and not exists (
+  select 1 from potion_quantity_requirements r
+  where r.potion_id = p.potion_id
+    and r.perk_tier = 'Secrets of Matter I + II'
+);
+
Index: src/main/java/org/alchemy/craft/CraftingRepositoryImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/alchemy/craft/CraftingRepositoryImpl.java b/src/main/java/org/alchemy/craft/CraftingRepositoryImpl.java
new file mode 100644
--- /dev/null	(date 1771406807710)
+++ b/src/main/java/org/alchemy/craft/CraftingRepositoryImpl.java	(date 1771406807710)
@@ -0,0 +1,34 @@
+package org.alchemy.craft;
+
+import org.springframework.jdbc.core.JdbcTemplate;
+import org.springframework.jdbc.core.RowMapper;
+import org.springframework.stereotype.Repository;
+
+import java.util.List;
+
+@Repository
+public class CraftingRepositoryImpl implements CraftingRepository {
+    private static final RowMapper<RecipeRow> RECIPE_ROW_MAPPER = (rs, rowNum) ->
+            new RecipeRow(
+                    rs.getString("potion_name"),
+                    rs.getLong("ingredient_id"),
+                    rs.getInt("qty")
+    );
+    private final JdbcTemplate jdbc;
+
+    public CraftingRepositoryImpl(JdbcTemplate jdbc) { this.jdbc = jdbc; }
+
+    @Override
+    public List<RecipeRow> findAllRecipes() {
+        return jdbc.query(
+                "select p.name as potion_name, " +
+                        "       pi.ingredient_id, " +
+                        "       pi.qty " +
+                        "from potions p " +
+                        "join potion_ingredients pi " +
+                        "     on p.potion_id = pi.potion_id",
+                RECIPE_ROW_MAPPER
+        );
+    }
+
+}
Index: .idea/encodings.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/encodings.xml b/.idea/encodings.xml
new file mode 100644
--- /dev/null	(date 1771180528000)
+++ b/.idea/encodings.xml	(date 1771180528000)
@@ -0,0 +1,7 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<project version="4">
+  <component name="Encoding">
+    <file url="file://$PROJECT_DIR$/src/main/java" charset="UTF-8" />
+    <file url="file://$PROJECT_DIR$/src/main/resources" charset="UTF-8" />
+  </component>
+</project>
\ No newline at end of file
Index: src/main/java/org/alchemy/craft/CraftingServiceImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/alchemy/craft/CraftingServiceImpl.java b/src/main/java/org/alchemy/craft/CraftingServiceImpl.java
new file mode 100644
--- /dev/null	(date 1771410496519)
+++ b/src/main/java/org/alchemy/craft/CraftingServiceImpl.java	(date 1771410496519)
@@ -0,0 +1,62 @@
+package org.alchemy.craft;
+
+import org.alchemy.craft.dto.MissingIngredient;
+import org.alchemy.craft.dto.PotionCraftResult;
+import org.alchemy.craft.model.CraftingRequest;
+import org.alchemy.craft.model.CraftingResponse;
+import org.springframework.stereotype.Service;
+
+import java.util.ArrayList;
+import java.util.List;
+import java.util.Map;
+import java.util.stream.Collectors;
+
+@Service
+public class CraftingServiceImpl implements CraftingService {
+
+    private final CraftingRepository craftingRepository;
+
+    public CraftingServiceImpl(CraftingRepository craftingRepository) {
+        this.craftingRepository = craftingRepository;
+    }
+
+    @Override
+    public List<PotionCraftResult> calculatePotions(CraftingRequest request) {
+
+        var allRecipes = craftingRepository.findAllRecipes();
+        Map<Long, Integer> myInventory = request.inventory();
+
+        Map<String, List<CraftingRepository.RecipeRow>> recipesByPotion =
+                allRecipes.stream()
+                        .collect(Collectors.groupingBy(CraftingRepository.RecipeRow::potionName));
+
+        List<PotionCraftResult> results = new ArrayList<>();
+
+        for (var entry : recipesByPotion.entrySet()) {
+            String potionName = entry.getKey();
+            List<CraftingRepository.RecipeRow> ingredientsNeeded = entry.getValue();
+
+            int maxCanCraft = Integer.MAX_VALUE;
+            List<MissingIngredient> missingList = new ArrayList<>();
+
+            for (var item : ingredientsNeeded) {
+                int have = myInventory.getOrDefault(item.ingredientId(), 0);
+                int need = item.requiredQty();
+
+                if (have < need) {
+                    missingList.add(new MissingIngredient(item.ingredientId(), need, have));
+                    maxCanCraft = Math.min(maxCanCraft, 0);
+                } else {
+                    maxCanCraft = Math.min(maxCanCraft, have / need);
+                }
+            }
+
+            results.add(new PotionCraftResult(potionName, maxCanCraft, missingList));
+        }
+
+        // соортировка зелий, возможные перекидываются на верх
+        results.sort((a, b) -> Integer.compare(b.maxQuantity(), a.maxQuantity()));
+
+        return results;
+    }
+}
\ No newline at end of file
Index: src/main/java/org/alchemy/craft/CraftingController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/alchemy/craft/CraftingController.java b/src/main/java/org/alchemy/craft/CraftingController.java
new file mode 100644
--- /dev/null	(date 1771408553495)
+++ b/src/main/java/org/alchemy/craft/CraftingController.java	(date 1771408553495)
@@ -0,0 +1,24 @@
+package org.alchemy.craft;
+
+import org.alchemy.craft.dto.PotionCraftResult;
+import org.alchemy.craft.model.CraftingRequest;
+import org.alchemy.craft.model.CraftingResponse;
+import org.springframework.web.bind.annotation.*;
+
+import java.util.List;
+
+@RestController
+@RequestMapping("/crafting")
+public class CraftingController {
+
+    private final CraftingService craftingService;
+
+    public CraftingController(CraftingService craftingService) {
+        this.craftingService = craftingService;
+    }
+
+    @PostMapping("/calculate")
+    public List<PotionCraftResult> calculate(@RequestBody CraftingRequest request) {
+        return craftingService.calculatePotions(request);
+    }
+}
\ No newline at end of file
Index: .idea/.gitignore
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/.gitignore b/.idea/.gitignore
new file mode 100644
--- /dev/null	(date 1771180198000)
+++ b/.idea/.gitignore	(date 1771180198000)
@@ -0,0 +1,10 @@
+# Default ignored files
+/shelf/
+/workspace.xml
+# Ignored default folder with query files
+/queries/
+# Datasource local storage ignored files
+/dataSources/
+/dataSources.local.xml
+# Editor-based HTTP Client requests
+/httpRequests/
Index: src/main/java/org/alchemy/craft/dto/PotionCraftResult.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/alchemy/craft/dto/PotionCraftResult.java b/src/main/java/org/alchemy/craft/dto/PotionCraftResult.java
new file mode 100644
--- /dev/null	(date 1771409411536)
+++ b/src/main/java/org/alchemy/craft/dto/PotionCraftResult.java	(date 1771409411536)
@@ -0,0 +1,11 @@
+package org.alchemy.craft.dto;
+
+import com.fasterxml.jackson.annotation.JsonInclude;
+import java.util.List;
+
+@JsonInclude(JsonInclude.Include.NON_EMPTY)
+public record PotionCraftResult(
+        String potionName,
+        int maxQuantity,
+        List<MissingIngredient> missingIngredients
+) {}
\ No newline at end of file
Index: .idea/dataSources.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/dataSources.xml b/.idea/dataSources.xml
new file mode 100644
--- /dev/null	(date 1771261928000)
+++ b/.idea/dataSources.xml	(date 1771261928000)
@@ -0,0 +1,19 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<project version="4">
+  <component name="DataSourceManagerImpl" format="xml" multifile-model="true">
+    <data-source source="LOCAL" name="potiondb" uuid="6f77e8c8-db26-46df-9a28-69d0fe3f19f3">
+      <driver-ref>h2.unified</driver-ref>
+      <synchronize>true</synchronize>
+      <imported>true</imported>
+      <remarks>$PROJECT_DIR$/src/main/resources/application.properties</remarks>
+      <jdbc-driver>org.h2.Driver</jdbc-driver>
+      <jdbc-url>jdbc:h2:mem:potiondb;DB_CLOSE_DELAY=-1</jdbc-url>
+      <jdbc-additional-properties>
+        <property name="com.intellij.clouds.kubernetes.db.host.port" />
+        <property name="com.intellij.clouds.kubernetes.db.enabled" value="false" />
+        <property name="com.intellij.clouds.kubernetes.db.container.port" />
+      </jdbc-additional-properties>
+      <working-dir>$ProjectFileDir$</working-dir>
+    </data-source>
+  </component>
+</project>
\ No newline at end of file
Index: src/main/java/org/alchemy/craft/dto/MissingIngredient.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/alchemy/craft/dto/MissingIngredient.java b/src/main/java/org/alchemy/craft/dto/MissingIngredient.java
new file mode 100644
--- /dev/null	(date 1771409168219)
+++ b/src/main/java/org/alchemy/craft/dto/MissingIngredient.java	(date 1771409168219)
@@ -0,0 +1,12 @@
+package org.alchemy.craft.dto;
+
+public record MissingIngredient(
+        Long ingredientId,
+        int required,
+        int have,
+        int missing
+) {
+    public MissingIngredient(Long ingredientId, int required, int have) {
+        this(ingredientId, required, have, required - have);
+    }
+}
\ No newline at end of file
Index: .idea/misc.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/misc.xml b/.idea/misc.xml
new file mode 100644
--- /dev/null	(date 1771264282134)
+++ b/.idea/misc.xml	(date 1771264282134)
@@ -0,0 +1,14 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<project version="4">
+  <component name="ExternalStorageConfigurationManager" enabled="true" />
+  <component name="MavenProjectsManager">
+    <option name="originalFiles">
+      <list>
+        <option value="$PROJECT_DIR$/pom.xml" />
+      </list>
+    </option>
+  </component>
+  <component name="ProjectRootManager" version="2" languageLevel="JDK_21" default="true" project-jdk-name="ms-21" project-jdk-type="JavaSDK">
+    <output url="file://$PROJECT_DIR$/out" />
+  </component>
+</project>
\ No newline at end of file
Index: src/main/java/org/alchemy/ingredients/IngredientsRepositoryImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/alchemy/ingredients/IngredientsRepositoryImpl.java b/src/main/java/org/alchemy/ingredients/IngredientsRepositoryImpl.java
new file mode 100644
--- /dev/null	(date 1771410748549)
+++ b/src/main/java/org/alchemy/ingredients/IngredientsRepositoryImpl.java	(date 1771410748549)
@@ -0,0 +1,62 @@
+package org.alchemy.ingredients;
+
+import org.alchemy.ingredients.model.IngredientsEntity;
+import org.springframework.jdbc.core.JdbcTemplate;
+import org.springframework.jdbc.core.RowMapper;
+import org.springframework.jdbc.support.GeneratedKeyHolder;
+import org.springframework.jdbc.support.KeyHolder;
+import org.springframework.stereotype.Repository;
+
+import java.sql.PreparedStatement;
+import java.sql.Statement;
+import java.util.List;
+import java.util.Optional;
+
+@Repository
+public class IngredientsRepositoryImpl implements IngredientsRepository {
+    private static final RowMapper<IngredientsEntity> INGREDIENTS_ROW_MAPPER = (rs, rowNum) ->
+            new IngredientsEntity(
+                    rs.getLong("ingredient_id"),
+                    rs.getString("name")
+            );
+
+    private final JdbcTemplate jdbc;
+
+    public IngredientsRepositoryImpl(JdbcTemplate jdbc) { this.jdbc = jdbc; }
+
+    @Override
+    public List<IngredientsEntity> findAll() {
+        return jdbc.query(
+                "select ingredient_id, name from ingredients order by ingredient_id",
+                INGREDIENTS_ROW_MAPPER
+                            );
+    }
+
+    @Override
+    public Optional<IngredientsEntity> findById(long id) {
+        var list = jdbc.query(
+                "select ingredient_id, name from ingredients where ingredient_id = ?",
+                INGREDIENTS_ROW_MAPPER,
+                id
+                                );
+        return list.stream().findFirst();
+    }
+
+    @Override
+    public IngredientsEntity create(String name) {
+        KeyHolder kh = new GeneratedKeyHolder();
+
+        jdbc.update(connection -> {
+            PreparedStatement ps = connection.prepareStatement(
+                    "insert into ingredients(name) values (?)",
+                    Statement.RETURN_GENERATED_KEYS
+            );
+            ps.setString(1, name);
+            return ps;
+        }, kh);
+
+        Number key = kh.getKey();
+        long id = (key != null) ? key.longValue() : -1L;
+        return new IngredientsEntity(id, name);
+    }
+}
Index: src/main/java/org/alchemy/ingredients/IngredientsController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/alchemy/ingredients/IngredientsController.java b/src/main/java/org/alchemy/ingredients/IngredientsController.java
new file mode 100644
--- /dev/null	(date 1771336344044)
+++ b/src/main/java/org/alchemy/ingredients/IngredientsController.java	(date 1771336344044)
@@ -0,0 +1,38 @@
+package org.alchemy.ingredients;
+
+import org.alchemy.ingredients.model.CreateIngredientsRequest;
+import org.alchemy.ingredients.model.Ingredients;
+import org.springframework.dao.DataIntegrityViolationException;
+import org.springframework.http.HttpStatus;
+import org.springframework.web.bind.annotation.*;
+import org.springframework.web.server.ResponseStatusException;
+
+import java.util.List;
+
+@RestController
+@RequestMapping("/ingredients")
+public class IngredientsController {
+
+    private final IngredientsService ingredientsService;
+
+    public IngredientsController(final IngredientsService ingredientsService) {this.ingredientsService = ingredientsService;}
+
+    @GetMapping
+    public List<Ingredients> list(){ return ingredientsService.getAll(); }
+
+    @GetMapping("/{id}")
+    public Ingredients get(@PathVariable long id) {
+        return ingredientsService.get(id)
+                .orElseThrow(() -> new ResponseStatusException(HttpStatus.NOT_FOUND, "Ingredients not found"));
+    }
+
+    @PostMapping
+    @ResponseStatus(HttpStatus.CREATED)
+    public Ingredients create(@RequestBody CreateIngredientsRequest req) { return ingredientsService.create(req); }
+
+    @ExceptionHandler(DataIntegrityViolationException.class)
+    @ResponseStatus(HttpStatus.CONFLICT)
+    public String handleConflict(DataIntegrityViolationException ex){
+        return "Conflict: %s".formatted(ex.getMostSpecificCause().getMessage());
+    }
+}
Index: src/main/java/org/alchemy/ingredients/IngredientsService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/alchemy/ingredients/IngredientsService.java b/src/main/java/org/alchemy/ingredients/IngredientsService.java
new file mode 100644
--- /dev/null	(date 1771336127701)
+++ b/src/main/java/org/alchemy/ingredients/IngredientsService.java	(date 1771336127701)
@@ -0,0 +1,15 @@
+package org.alchemy.ingredients;
+
+import org.alchemy.ingredients.model.CreateIngredientsRequest;
+import org.alchemy.ingredients.model.Ingredients;
+
+import java.util.List;
+import java.util.Optional;
+
+public interface IngredientsService {
+    List<Ingredients> getAll();
+
+    Optional<Ingredients> get(long id);
+
+    Ingredients create(CreateIngredientsRequest request);
+}
Index: src/main/java/org/alchemy/ingredients/IngredientsServiceImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/alchemy/ingredients/IngredientsServiceImpl.java b/src/main/java/org/alchemy/ingredients/IngredientsServiceImpl.java
new file mode 100644
--- /dev/null	(date 1771336407327)
+++ b/src/main/java/org/alchemy/ingredients/IngredientsServiceImpl.java	(date 1771336407327)
@@ -0,0 +1,38 @@
+package org.alchemy.ingredients;
+
+import org.alchemy.ingredients.model.CreateIngredientsRequest;
+import org.alchemy.ingredients.model.Ingredients;
+import org.springframework.stereotype.Service;
+
+import java.util.List;
+import java.util.Optional;
+
+@Service
+public class IngredientsServiceImpl implements IngredientsService{
+
+    private final IngredientsRepository ingredientsRepository;
+
+    public IngredientsServiceImpl(IngredientsRepository ingredientsRepository) {
+        this.ingredientsRepository = ingredientsRepository;
+    }
+
+    @Override
+    public List<Ingredients> getAll() {
+        return ingredientsRepository.findAll()
+                .stream()
+                .map(Ingredients::from)
+                .toList();
+    }
+
+    @Override
+    public Optional<Ingredients> get(long id) {
+        return ingredientsRepository.findById(id)
+                .map(Ingredients::from);
+    }
+
+    @Override
+    public Ingredients create(CreateIngredientsRequest request) {
+        var created = ingredientsRepository.create(request.name());
+        return Ingredients.from(created);
+    }
+}
Index: src/main/java/org/alchemy/ingredients/model/CreateIngredientsRequest.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/alchemy/ingredients/model/CreateIngredientsRequest.java b/src/main/java/org/alchemy/ingredients/model/CreateIngredientsRequest.java
new file mode 100644
--- /dev/null	(date 1771328337199)
+++ b/src/main/java/org/alchemy/ingredients/model/CreateIngredientsRequest.java	(date 1771328337199)
@@ -0,0 +1,4 @@
+package org.alchemy.ingredients.model;
+
+public record CreateIngredientsRequest(int ingredientsNo, String name) {
+}
Index: .idea/sqldialects.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/sqldialects.xml b/.idea/sqldialects.xml
new file mode 100644
--- /dev/null	(date 1771360809328)
+++ b/.idea/sqldialects.xml	(date 1771360809328)
@@ -0,0 +1,6 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<project version="4">
+  <component name="SqlDialectMappings">
+    <file url="file://$PROJECT_DIR$/src/main/resources/db/migration/V2__seed_data.sql" dialect="GenericSQL" />
+  </component>
+</project>
\ No newline at end of file
Index: src/main/java/org/alchemy/craft/model/CraftingResponse.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/org/alchemy/craft/model/CraftingResponse.java b/src/main/java/org/alchemy/craft/model/CraftingResponse.java
new file mode 100644
--- /dev/null	(date 1771362893815)
+++ b/src/main/java/org/alchemy/craft/model/CraftingResponse.java	(date 1771362893815)
@@ -0,0 +1,5 @@
+package org.alchemy.craft.model;
+
+//имя зелья и сколько штук получится
+public record CraftingResponse(String potionName, int maxQuantity) {
+}
Index: .idea/discord.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/discord.xml b/.idea/discord.xml
new file mode 100644
--- /dev/null	(date 1771361366865)
+++ b/.idea/discord.xml	(date 1771361366865)
@@ -0,0 +1,14 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<project version="4">
+  <component name="DiscordProjectSettings">
+    <option name="show" value="ASK" />
+    <option name="description" value="" />
+    <option name="applicationTheme" value="default" />
+    <option name="iconsTheme" value="default" />
+    <option name="button1Title" value="" />
+    <option name="button1Url" value="" />
+    <option name="button2Title" value="" />
+    <option name="button2Url" value="" />
+    <option name="customApplicationId" value="" />
+  </component>
+</project>
\ No newline at end of file
Index: .idea/vcs.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/vcs.xml b/.idea/vcs.xml
new file mode 100644
--- /dev/null	(date 1771436243373)
+++ b/.idea/vcs.xml	(date 1771436243373)
@@ -0,0 +1,6 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<project version="4">
+  <component name="VcsDirectoryMappings">
+    <mapping directory="$PROJECT_DIR$" vcs="Git" />
+  </component>
+</project>
\ No newline at end of file
